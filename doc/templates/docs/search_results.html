<div class="list-group mb-4">
    {% for t in entities %}
    <a class="list-group-item list-group-item-action flex-column align-items-start p-0" href="{% url 'doc:detail' t.id %}">
        <div class="position-relative py-3 px-3">
            <div class="position-relative z-1 bg-transparent d-flex w-100 justify-content-between">
                <div class="d-flex align-items-start">
                    {% if t.has_unsettled_tr %}
                    <i class="fs-3 lh-1 bi-clock-history opacity-50 me-3"></i>
                    {% elif t.file %}
                    <i class="fs-3 lh-1 bi-file-earmark-arrow-down opacity-50 me-3"></i>
                    {% elif t.uri %}
                    <i class="fs-3 lh-1 bi bi-bookmark opacity-50 me-3"></i>
                    {% elif t.is_markdown %}
                    <i class="fs-3 lh-1 bi bi-filetype-md opacity-50 me-3"></i>
                    {% else %}
                    <i class="fs-3 lh-1 bi bi-file-earmark-text opacity-50 me-3"></i>
                    {% endif %}
                </div>
                <div class="flex-grow-1">
                    <div class="d-flex w-100 justify-content-between">
                        <h6 class="d-inline mb-1">{{ t.title }}{% if t.is_archived and not t.successor %}<span class="badge bg-transparent text-info border border-info ms-3">archived</span>{% endif %}</h6>
                        <small class="text-muted text-nowrap mt-1">{{ t.updated_at|timesince }}</small>
                    </div>
                    <small class="mb-1">
                        {% if t.time %}
                        {{ t.time|date:"SHORT_DATE_FORMAT" }}&nbsp;&mdash;
                        {% else %}
                        {{ t.created_at|date:"SHORT_DATE_FORMAT" }}&nbsp;&mdash;
                        {% endif %}
                        {% if t.description %}
                        {{ t.description|truncatechars:300 }}
                        {% else %}
                        {{ t.text|truncatechars:300 }}
                        {% endif %}
                    </small>
                </div>
            </div>
            {% if t.deleted_at and t.successor %}
            <div class="z-0 position-absolute top-0 start-0 h-100 w-100 d-flex align-items-center justify-content-center bg-warning border-0" style="--bs-bg-opacity: .4;">
                <h1 class="display-3 lh-1 p-0 m-0 fw-bold opacity-25" style="color:var(--bs-body-bg)">REVISION</h1>
            </div>
            {% elif t.deleted_at %}
            <div class="z-0 position-absolute top-0 start-0 h-100 w-100 d-flex align-items-center justify-content-center bg-danger border-0" style="--bs-bg-opacity: .4;">
                <h1 class="display-3 lh-1 p-0 m-0 fw-bold opacity-25" style="color:var(--bs-body-bg)">DELETED</h1>
            </div>
            {% elif not t.deleted_at and t.successor %}
            <div class="z-0 position-absolute top-0 start-0 h-100 w-100 d-flex align-items-center justify-content-center bg-primary border-0" style="--bs-bg-opacity: .4;">
                <h1 class="display-3 lh-1 p-0 m-0 fw-bold opacity-25" style="color:var(--bs-body-bg)">VERSION</h1>
            </div>
            {% endif %}
        </div>
    </a>
    {% endfor %}
</div>